<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Overworld</title>
  <link rel="stylesheet" href="overworld.css">
</head>

<body>
  <h1>Overworld</h1>

  <div id="character-display"></div>

  <!-- Buttons to go to new areas -->
  <div class="location-buttons">
    <button id="forestBtn">Go to Forest</button>
    <button id="dungeonBtn">Enter Dungeon</button>
    <button id="templeBtn">Visit Temple</button>
  </div>
  <script>
    // 1. Get the query string (?character=...)
    const params = new URLSearchParams(window.location.search);
    const charData = params.get("character");

    let character = null;
    if (charData) {
      // 2. Decode and parse JSON
      character = JSON.parse(decodeURIComponent(charData));

      // 3. Show character info
      const display = document.getElementById("character-display");
      display.innerHTML = `
        <h2>${character.name}</h2>
        <p>HP: ${character.hp}</p>
        <p>flavor: ${character.flavor}</p>
        <p>difficulty: ${character.difficulty}</p>
      `;
    }

    // 4. Send the character data forward
    function goTo(location) {
      if (!character) return;
      const data = encodeURIComponent(JSON.stringify(character));
      window.location.href = `${location}.html?character=${data}`;
    }

    // 5. Button click listeners
    document.getElementById("forestBtn").addEventListener("click", () => goTo("forest"));
    document.getElementById("dungeonBtn").addEventListener("click", () => goTo("dungeon"));
    document.getElementById("templeBtn").addEventListener("click", () => goTo("temple"));
  </script>
</body>

</html>
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Character Selector</title>
  <link rel="stylesheet" href="./styles/character_selector.css">
</head>

<body>
  <h1>Character Selector</h1>

  <!-- Container where characters will appear -->
  <div id="character-container" class="character-grid"></div>
  <script src="./js/characters.js"></script>

  <script>
    const buttonSound = new Audio("../assets/sound/button_sound.mp3");
    const container = document.getElementById("character-container");

    data.characters.forEach(character => {
      const card = document.createElement("div");
      card.classList.add("character-card");

      card.innerHTML = `
        <img src="${character.image}" alt="${character.name}" class="character-img">
        <div class="character-info">
          <h2>${character.name}</h2>
          <p><strong>HP:</strong> ${character.maxHp}</p>
          <p><strong>Difficulty:</strong> ${character.difficulty}</p>
          <p class="flavor">${character.flavor}</p>
          <h3>Abilities</h3>
          <ul>
            ${character.abilities.map(ability => `
              <li><strong>${ability.name}:</strong> ${ability.description}</li>
            `).join("")}
          </ul>
          <img src="../assets/sprites/select_button.png" 
               class="select-btn" 
               alt="Select Button">
        </div> 
      `;

      const selectBtn = card.querySelector(".select-btn");

      // Pressed effect
      selectBtn.addEventListener("mousedown", () => {
        selectBtn.src = "../assets/sprites/select_button_pressed.png";
        buttonSound.play();
      });

      // Release â†’ pick character + go to overworld
      selectBtn.addEventListener("mouseup", () => {
        selectBtn.src = "../assets/sprites/select_button.png";
        // Pass character name via query string
        const charData = encodeURIComponent(JSON.stringify(character));
        window.location.href = `overworld.html?character=${charData}`;
        // window.location.href = `battle.html?character=${charData}`;

      });

      container.appendChild(card);
    });
  </script>

  <script src="./js/cursor.js"></script>
</body>

</html>